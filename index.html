<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ุจุงูุฉ ุงููุงูุฏูู</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <div class="header">
        <img src="png7.png" alt="ุดุนุงุฑ">
        <h1>ุจุงูุฉ ุงููุงูุฏูู ๐ช๐ธ</h1>
        <p class="subtitle">ุฎุฏูุงุช ูุฎุตุตุฉ ููู ูู ูุญุชุงุฌ ูุณุงุนุฏุฉ ูู ุฅุณุจุงููุง</p>
    </div>

    <!-- Paso 1: Papeles / Sin Papeles -->
    <div id="statusCards">
        <div class="card" data-status="papeles">
            <span class="icon">๐</span> ูุน ูุซุงุฆู
        </div>
        <div class="card" data-status="sinpapeles">
            <span class="icon">๐ซ</span> ุจุฏูู ูุซุงุฆู
        </div>
    </div>

    <!-- Paso 2: Sub-opciones si Papeles -->
    <div id="papelesOptions" class="hidden">
        <label>ุงุฎุชุฑ ููุน ูุถุนู:</label>
        <select id="papelesType">
            <option value="">-- ุงุฎุชุฑ --</option>
            <option value="estudiante">ุทุงูุจ</option>
            <option value="residente">ูููู</option>
            <option value="turista">ุณุงุฆุญ</option>
        </select>
    </div>

    <!-- Paso 3: Lista de Servicios -->
    <div id="servicesDiv" class="hidden">
        <label>ุงุฎุชุฑ ุงูุฎุฏูุงุช ุงููุทููุจุฉ:</label>
        <div style="display: flex; flex-direction: column; gap: 5px;">
            <div class="service-card">
                <input type="checkbox" id="serv_cuenta" value="Cuenta bancaria">
                <label for="serv_cuenta">ูุชุญ ุญุณุงุจ ุจููู</label>
            </div>
            <div class="service-card">
                <input type="checkbox" id="serv_trabajo" value="Trabajo">
                <label for="serv_trabajo">ุงูุจุญุซ ุนู ุนูู</label>
            </div>
            <div class="service-card">
                <input type="checkbox" id="serv_alquiler" value="Alquiler">
                <label for="serv_alquiler">ุงูุจุญุซ ุนู ุณูู</label>
            </div>
            <div class="service-card">
                <input type="checkbox" id="serv_empadronamiento" value="Empadronamiento">
                <label for="serv_empadronamiento">ุงูุชุณุฌูู ูู ุงูุจูุฏูุฉ</label>
            </div>
            <div class="service-card">
                <input type="checkbox" id="serv_cv" value="CV">
                <label for="serv_cv">ูุชุงุจุฉ ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ</label>
            </div>
            <div class="service-card">
                <input type="checkbox" id="serv_otros" value="Otros">
                <label for="serv_otros">ุฎุฏูุงุช ุฃุฎุฑู</label>
            </div>
        </div>
    </div>

    <!-- Paso 4: Nรบmero de WhatsApp -->
    <div id="whatsappDiv" class="hidden">
        <label>ููุฏ ุงูุฏููุฉ:</label>
        <select id="countryCode">
            <option value="+34">ุฅุณุจุงููุง (+34)</option>
            <option value="+212">ุงููุบุฑุจ (+212)</option>
            <option value="+33">ูุฑูุณุง (+33)</option>
            <option value="+1">ุงูููุงูุงุช ุงููุชุญุฏุฉ (+1)</option>
        </select>

        <label>ุฑูู ูุงุชุณุงุจ:</label>
        <input type="text" id="phone" placeholder="612345678" pattern="\d{9}" title="ูุฌุจ ุฃู ูููู 9 ุฃุฑูุงู">

        <button id="sendBtn">ุฅุฑุณุงู ุงูุทูุจ</button>
        <button id="resetBtn" class="reset-btn">ุฅุนุงุฏุฉ ุชุนููู</button>
    </div>

    <!-- Mensaje de รฉxito -->
    <div id="thankMessage" class="thank-message hidden">
        <p>โ ุชู ุฅุฑุณุงู ุทูุจู ุจูุฌุงุญ! ุณูุฑุฏ ุนููู ูุฑูุจูุง ุนุจุฑ ูุงุชุณุงุจ.</p>
        <p>ูู ุชุฑุบุจ ูู ูุนุฑูุฉ <a href="http://inspiring-frangipane-552637.netlify.app" target="_blank">ุงูุฎุฏูุงุช ุงูููุฏูุฉุ</a></p>
        <p>ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูุฎุฏูุฉุ ููุฏ ุฃู ูุนุฑู ุฑุฃูู: <a href="https://docs.google.com/forms/d/e/1FAIpQLSeEiutpdH4GgxXIVcktMl54Ma2ZQ9OJ9FfPoQU8FS5s0VbAYA/viewform?usp=header" target="_blank">ููู ุงูุฎุฏูุฉ</a></p>
        <p>ููููู ุฅุฑุณุงู ุทูุจ ุขุฎุฑ ุฅุฐุง ููุช ุจุญุงุฌุฉ ูุฎุฏูุงุช ุฅุถุงููุฉ.</p>
    </div>
</div>

<script>
    const statusCards = document.querySelectorAll('.card');
    const papelesOptions = document.getElementById('papelesOptions');
    const servicesDiv = document.getElementById('servicesDiv');
    const whatsappDiv = document.getElementById('whatsappDiv');
    const sendBtn = document.getElementById('sendBtn');
    const resetBtn = document.getElementById('resetBtn');
    const thankMessage = document.getElementById('thankMessage');
    let selectedStatus = "";

    // โ ุชููุฆุฉ ุญุงูุฉ ุงููุณุชุฎุฏู (ุฅุฐุง ูุงู ูุฏ ุฃุฑุณู ูู ูุจู)
    const savedData = localStorage.getItem('extranjerosUser');
    if(savedData) {
        const user = JSON.parse(savedData);
        if(user.phone && user.countryCode) {
            document.getElementById('phone').value = user.phone;
            document.getElementById('countryCode').value = user.countryCode;
        }
    }

    statusCards.forEach(card => {
        card.addEventListener('click', function() {
            selectedStatus = this.getAttribute('data-status');
            if(selectedStatus === "papeles") {
                papelesOptions.classList.remove('hidden');
                servicesDiv.classList.add('hidden');
                whatsappDiv.classList.add('hidden');
                sendBtn.classList.add('hidden');
            } else {
                papelesOptions.classList.add('hidden');
                servicesDiv.classList.remove('hidden');
                whatsappDiv.classList.remove('hidden');
                sendBtn.classList.remove('hidden');
            }
        });
    });

    document.getElementById('papelesType').addEventListener('change', function() {
        if(this.value !== "") {
            servicesDiv.classList.remove('hidden');
            whatsappDiv.classList.remove('hidden');
            sendBtn.classList.remove('hidden');
            selectedStatus = this.value;
        } else {
            servicesDiv.classList.add('hidden');
            whatsappDiv.classList.add('hidden');
            sendBtn.classList.add('hidden');
        }
    });

    sendBtn.addEventListener('click', function() {
        const countryCode = document.getElementById('countryCode').value;
        const phone = document.getElementById('phone').value.trim();

        // โ ุงูุชุญูู ูู ุตุญุฉ ุงูุฑูู
        if(phone === "") {
            alert("ูุฑุฌู ุฅุฏุฎุงู ุฑูู ูุงุชุณุงุจ");
            return;
        }
        if(!/^\d{9}$/.test(phone)) {
            alert("ูุฌุจ ุฃู ูููู ุงูุฑูู ูููููุง ูู 9 ุฃุฑูุงู (ุจุฏูู ููุฏ ุงูุฏููุฉ)");
            return;
        }

        // โ ุฌูุน ุงูุฎุฏูุงุช ุงููุฎุชุงุฑุฉ
        const servicesCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
        const selectedServices = Array.from(servicesCheckboxes).map(cb => cb.value).join(", ");

        if(selectedServices === "") {
            alert("ูุฑุฌู ุงุฎุชูุงุฑ ุฎุฏูุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู");
            return;
        }

        // โ ุญูุธ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู localStorage (ููุนูุฏุฉ ูุงุญููุง)
        localStorage.setItem('extranjerosUser', JSON.stringify({
            phone: phone,
            countryCode: countryCode
        }));

       // โ ูุชุญ ูููุฐุฌ Google Forms ูุจุงุดุฑุฉ
thankMessage.classList.remove('hidden');

// โ ูุชุญ ูุงุชุณุงุจ
const yourNumber = "212700435618";
const whatsappURL = `https://wa.me/212700435618?text=${encodeURIComponent(
    `ุทูุจ ุฌุฏูุฏ:\nุงูุญุงูุฉ: ${selectedStatus}\nุงูุฎุฏูุงุช: ${selectedServices}\nุงูุฑูู: ${countryCode}${phone}\n\n๐ ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูุฎุฏูุฉุ ููุฏ ุฃู ูุนุฑู ุฑุฃูู: https://docs.google.com/forms/d/e/1FAIpQLSeEiutpdH4GgxXIVcktMl54Ma2ZQ9OJ9FfPoQU8FS5s0VbAYA/viewform?usp=header`
)}`;
window.open(whatsappURL, "_blank");

// โ ูุชุญ ูููุฐุฌ Google Forms (ูุฅุฏุฎุงู ุงูุจูุงูุงุช)
const formURL = "https://forms.gle/gBLEJJKKiWWo6KcT9";
window.open(formURL, "_blank");
    });

    resetBtn.addEventListener('click', function() {
        // โ ุฅุนุงุฏุฉ ุชุนููู ูู ุดูุก
        document.getElementById('papelesType').value = "";
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
        document.getElementById('phone').value = "";
        document.getElementById('countryCode').value = "+34";
        
        papelesOptions.classList.add('hidden');
        servicesDiv.classList.add('hidden');
        whatsappDiv.classList.add('hidden');
        sendBtn.classList.add('hidden');
        thankMessage.classList.add('hidden');
        
        selectedStatus = "";
    });
</script>
</body>
</html>

